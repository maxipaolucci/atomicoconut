<form class="form__container form__login" (ngSubmit)="onSubmit()" #loginForm="ngForm" novalidate fxLayout="column" fxLayoutGap="10px" >
  
  <section fxLayout="column" class="form__fields">
    <div fxLayout="column" fxLayout.gt-sm="row" fxLayoutGap.gt-sm="10px" class="form__fields__row">
      <!-- Email -->
      <mat-form-field fxFlex class="form__field">
        <input matInput type="email" id="email" name="email" placeholder="Email address" 
            [(ngModel)]="model.email" 
            required email
            #email="ngModel">
  
        <mat-error *ngIf="email.invalid && (email.dirty || email.touched) && email.errors.required">Email is required</mat-error>
        <mat-error *ngIf="email.invalid && (email.dirty || email.touched) && email.errors.email">Email must be a valid email address</mat-error>
      </mat-form-field>
      
      <!-- Password -->
      <mat-form-field fxFlex class="form__field">
        <input matInput type="password" id="password" name="password" placeholder="Password" 
            [(ngModel)]="model.password" 
            required minlength="3" maxlength="8"
            #password="ngModel">
  
        <mat-error *ngIf="password.invalid && (password.dirty || password.touched) && password.errors.required">Password is required</mat-error>
        <mat-error *ngIf="password.invalid && (password.dirty || password.touched) && password.errors.minlength">Password must be longer than 3 characters</mat-error>
        <mat-error *ngIf="password.invalid && (password.dirty || password.touched) && password.errors.maxlength">Password must be shorter than 8 characters</mat-error>
      </mat-form-field>
    </div>
  </section>

  <section fxLayout="column" fxLayout.gt-xs="row" fxLayoutGap="10px" fxLayoutAlign.gt-xs="center center" class="form__actions form__actions--login">
    <button *ngIf="!loginServiceRunning" class="form__action mat-raised-button" mat-raised-button type="submit" 
        color="accent" [disabled]="!loginForm.form.valid">Login</button>
    
    <mat-progress-bar *ngIf="loginServiceRunning"
        class="progress-bar progress-bar--login"
        color="primary"
        mode="indeterminate">
    </mat-progress-bar>
    
    <mat-checkbox fxLayoutAlign.xs="center center" class="form__action" [(ngModel)]="forgotModel.forgot" name="forgot" id="forgot">Forgot my password</mat-checkbox>
  </section>

  <section fxLayout="column" fxLayout.gt-xs="row" fxLayoutGap="10px" fxLayoutAlign="center center" class="form__actions form__actions--create-account">
    <a mat-button color="accent" class="color__almost-white ac__link" routerLink="/users/register">Create an account</a>
  </section>

</form>

<form class="form__container form__forgot" (ngSubmit)="onForgotSubmit()" #forgotForm="ngForm" novalidate fxLayout="column" fxLayoutGap="10px" *ngIf="forgotModel.forgot">
  
  <section fxLayout="column" class="form__fields">
    <div fxLayout="column" fxLayout.gt-sm="row" fxLayoutGap.gt-sm="10px" class="form__fields__row">
      <!-- Email -->
      <mat-form-field fxFlex class="form__field">
        
        <input matInput type="email" id="emailForgot" name="emailForgot" placeholder="Email address" 
            [(ngModel)]="forgotModel.email" 
            required email
            #emailForgot="ngModel">
        <mat-hint align="start">Type your email and we will send you an email to reset your password.</mat-hint>
        <mat-error *ngIf="emailForgot.invalid && (emailForgot.dirty || emailForgot.touched) && emailForgot.errors.required">Email is required</mat-error>
        <mat-error *ngIf="emailForgot.invalid && (emailForgot.dirty || emailForgot.touched) && emailForgot.errors.email">Email must be a valid email address</mat-error>
      </mat-form-field>
    </div>
  </section>

  <section fxLayout="column" fxLayout.gt-xs="row" fxLayoutGap="10px" fxLayoutAlign.gt-xs="center none" class="form__actions">
    <button *ngIf="!forgotServiceRunning" class="form__action mat-raised-button" 
        color="accent" mat-raised-button type="submit" [disabled]="!forgotForm.form.valid">Send</button>

    <mat-progress-bar *ngIf="forgotServiceRunning"
        class="progress-bar progress-bar--forgot"
        color="primary"
        mode="indeterminate">
    </mat-progress-bar>
  </section>

</form>