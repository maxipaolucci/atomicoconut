<form class="form__container form__equity-calc" #equityForm="ngForm" novalidate fxLayout="column" fxLayoutGap="10px" >
  
  <section fxLayout="column" class="form__fields">
    <div fxLayout="column" fxLayout.gt-xs="row" fxLayoutGap.gt-xs="10px" class="form__fields__row">
      <!-- Purchase price -->
      <mat-form-field fxFlex fxFlex.gt-xs="200px" class="form__field">
        <input matInput type="number" id="purchasePrice" name="purchasePrice" placeholder="Purchase price" 
            [(ngModel)]="model.purchasePrice" 
            required
            value="model.purchasePrice"
            #purchasePrice="ngModel">
  
        <mat-error *ngIf="purchasePrice.invalid && (purchasePrice.dirty || purchasePrice.touched) && purchasePrice.errors.required">Purchase price is required</mat-error>
      </mat-form-field>
      
      <!-- Market value -->
      <mat-form-field fxFlex fxFlex.gt-xs="200px" class="form__field">
        <input matInput type="number" id="marketValue" name="marketValue" placeholder="Market value" 
            [(ngModel)]="model.marketValue" 
            required
            value="model.marketValue"
            #marketValue="ngModel">
  
        <mat-error *ngIf="marketValue.invalid && (marketValue.dirty || marketValue.touched) && marketValue.errors.required">Market value is required</mat-error>
      </mat-form-field>
    </div>
  </section>

  <section fxLayout="column" class="form__fields">
    <div fxLayout="column" fxLayout.gt-xs="row" fxLayoutGap.gt-xs="10px" class="form__fields__row">
      <!-- Loan coverage -->
      <mat-form-field fxFlex fxFlex.gt-xs="200px" class="form__field">
        <input matInput type="number" id="loanCoverage" name="loanCoverage" placeholder="Loan coverage %" 
            [(ngModel)]="model.loanCoverage" 
            required loanCoverage
            value="model.loanCoverage"
            #loanCoverage="ngModel">
  
        <mat-error *ngIf="loanCoverage.invalid && (loanCoverage.dirty || loanCoverage.touched) && loanCoverage.errors.required">Loan coverage is required</mat-error>
      </mat-form-field>

      <!-- Savings -->
      <mat-form-field fxFlex fxFlex.gt-xs="200px" class="form__field">
        <input matInput type="number" id="savings" name="savings" placeholder="Current savings" 
            [(ngModel)]="model.savings" 
            value="model.savings"
            #savings="ngModel">
      </mat-form-field>

      <!-- Add renovations checkbox -->
      <mat-slide-toggle color="accent" class="form__field form__field__toogle form__field__toogle--add-reno"
          [(ngModel)]="model.addRenovations" name="addRenovations" id="addRenovations">
        
        Add renovations data
      </mat-slide-toggle>
      <!-- <mat-checkbox fxFlex fxFlex.gt-xs="200px" class="form__action" [(ngModel)]="model.addRenovations" name="addRenovations" id="addRenovations">Add renovations data</mat-checkbox> -->
    </div>
  </section>

  <section fxLayout="column" class="form__fields" *ngIf="model.addRenovations">
    <div fxLayout="column" fxLayout.gt-xs="row" fxLayoutGap.gt-xs="10px" class="form__fields__row">
      <!-- Renovation cost -->
      <mat-form-field fxFlex fxFlex.gt-xs="200px" class="form__field">
        <input matInput type="number" id="renovationCost" name="renovationCost" placeholder="Renovation cost" 
            [(ngModel)]="model.renovationCost" 
            value="model.renovationCost"
            #renovationCost="ngModel">
      </mat-form-field>
      
      <!-- New market value -->
      <mat-form-field fxFlex fxFlex.gt-xs="200px" class="form__field">
        <input matInput type="number" id="newMarketValue" name="newMarketValue" placeholder="After renovations market value" 
            [(ngModel)]="model.newMarketValue" 
            value="model.newMarketValue"
            #newMarketValue="ngModel">
      </mat-form-field>
      
      <!-- First year repayment -->
      <mat-form-field fxFlex fxFlex.gt-xs="200px" class="form__field">
        <input matInput type="number" id="firstYearRepayment" name="firstYearRepayment" placeholder="First year loan repayments" 
            [(ngModel)]="model.firstYearRepayment" 
            value="model.firstYearRepayment"
            #firstYearRepayment="ngModel">
      </mat-form-field>
    </div>
  </section>

</form>

<section  class="">
  <div fxLayout="column" fxLayout.gt-xs="row" fxLayoutGap="10px" fxFlex fxFlex.gt-xs="620px">
    <mat-card fxFlex>
      <mat-card-title class="mat-card-title--ac">Initial figures</mat-card-title>
      <mat-card-content>
        <div><label>Loan amount: </label><span>{{loanAmount}}</span></div>
        <div><label>Deposit amount: </label><span>{{depositAmount}}</span></div>
        <div><label>Discount: </label><span>{{discount}}</span></div>
        <div><label>Equity: </label><span>{{equity}}</span></div>
      </mat-card-content>
    </mat-card>

    <mat-card fxFlex *ngIf="model.addRenovations">
      <mat-card-title class="mat-card-title--ac">After renovations figures</mat-card-title>
      <mat-card-content>
        <div><label>Usable equity: </label><span>{{usableEquityAfterReno}}</span></div>
      </mat-card-content>
    </mat-card>
  </div>
</section>